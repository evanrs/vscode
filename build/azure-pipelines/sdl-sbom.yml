parameters:
  - name: generateTaskDisplayName
    type: string
    default: Generate SBOM manifest
  - name: generateTaskBuildDropPath
    type: string
  - name: generateTaskPackageName
    type: string
  - name: publishTaskDisplayName
    type: string
    default: Publish SBOM manifest
  - name: publishTaskArtifact
    type: string
    default: sbom

steps:
  - task: AzureArtifacts.manifest-generator-task.manifest-generator-task.ManifestGeneratorTask@0
    displayName: ${{ parameters.generateTaskDisplayName }}
    inputs:
      BuildDropPath: ${{ parameters.generateTaskBuildDropPath }}

  - publish: ${{ parameters.generateTaskBuildDropPath }}/_manifest
    displayName: ${{ parameters.publishTaskDisplayName }}
    artifact: ${{ parameters.publishTaskArtifact }}
